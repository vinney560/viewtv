<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Channel | Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          boxShadow: {
            glow: '0 0 15px rgba(0,255,255,0.6)',
            'glow-sm': '0 0 8px rgba(0,255,255,0.4)'
          },
          animation: {
            'fade-in': 'fadeIn 0.3s ease-out',
            'toast': 'toast 4s forwards'
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0', transform: 'translateY(5px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' }
            },
            toast: {
              '0%, 90%': { opacity: '1', transform: 'translateY(0)' },
              '100%': { opacity: '0', transform: 'translateY(-20px)' }
            }
          }
        }
      }
    }
  </script>
  <style>
    .glow-hover:hover {
      box-shadow: 0 0 15px rgba(0,255,255,0.6);
      transform: translateY(-2px);
    }
    
    .card-glass {
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      background-color: rgba(15, 23, 42, 0.7);
    }
    
    .gradient-text {
      background: linear-gradient(90deg, #00ffff, #00bfff);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-screen p-6 flex items-center justify-center">

  <div class="w-full max-w-2xl animate-fade-in">
    <div class="card-glass rounded-xl border border-cyan-400/20 shadow-2xl overflow-hidden">
      <!-- Header -->
      <div class="bg-gradient-to-r from-cyan-900/50 to-blue-900/50 p-6 border-b border-cyan-400/20">
        <h1 class="gradient-text text-3xl font-extrabold text-center">Edit Channel</h1>
        <p class="text-center text-cyan-200 mt-1">Update channel details</p>
      </div>

      <!-- Flash Messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="px-6 pt-6 space-y-2">
            {% for category, message in messages %}
              <div class="animate-toast rounded-lg px-4 py-3 font-medium shadow-lg
                {% if category == 'success' %}
                  bg-green-600/90 border border-green-500
                {% elif category == 'error' %}
                  bg-red-600/90 border border-red-500
                {% else %}
                  bg-cyan-600/90 border border-cyan-500
                {% endif %}">
                <div class="flex items-center">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    {% if category == 'success' %}
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    {% elif category == 'error' %}
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    {% else %}
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    {% endif %}
                  </svg>
                  {{ message }}
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <!-- Form -->
      <form method="POST" action="{{ url_for('edit_channel', key=key) }}" class="p-6 space-y-6">
        <div class="space-y-6">
          <!-- Channel Name -->
          <div>
            <label for="name" class="block text-sm font-medium text-cyan-300 mb-2">Channel Name</label>
            <div class="relative">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
              <input type="text" name="name" id="name" value="{{ channel.name }}"
                     class="w-full px-5 py-3 bg-gray-800/70 border border-gray-700 rounded-xl text-white 
                            focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-400 transition"
                     required />
              <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                <svg class="h-5 w-5 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" />
                </svg>
              </div>
            </div>
          </div>

          <!-- Channel URL -->
          <div>
            <label for="url" class="block text-sm font-medium text-cyan-300 mb-2">Channel URL</label>
            <div class="relative">
              <input type="url" name="url" id="url" value="{{ channel.url }}"
                     class="w-full px-5 py-3 bg-gray-800/70 border border-gray-700 rounded-xl text-white 
                            focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-400 transition"
                     required />
              <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                <svg class="h-5 w-5 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                </svg>
              </div>
            </div>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="flex justify-between items-center pt-4 border-t border-gray-700/50">
          <a href="{{ url_for('manage_channels') }}"
             class="flex items-center text-cyan-400 hover:text-cyan-300 transition">
            <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
            Back to Channels
          </a>
          
          <button type="submit"
                  class="glow-hover bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 
                         text-white font-semibold px-8 py-3 rounded-xl transition-all duration-300">
            Save Changes
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Auto-hide flash messages -->
  <script>
    setTimeout(() => {
      const flashes = document.querySelectorAll('.animate-toast');
      flashes.forEach(flash => {
        flash.style.opacity = '0';
        setTimeout(() => flash.remove(), 500);
      });
    }, 4000);
  </script>
</body>
</html>